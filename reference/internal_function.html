<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="Check if 1) required functions are present in required packages and 2) required packages are installed locally.
Simplified version of saferDev::is_function_here(), used as internal function for the other functions of the package.
Check if critical operators of R are not present in other packages or in the global env.
Others functions of the R scope can be overwritten because safer functions always use :: when using any function.
Determine if a string has a odd number of quotes.
Extract all function names.
Replace any pattern inside simple ou double quotes by another replacement pattern and get the position of replacements
Replace any pattern inside () by another replacement pattern
Indicate if function names are inside quotes or after $
Return the positions of 1st letter of the function name and opening and closing parenthesis, as well as positions of the internal parenthesis.
Detect all the functions names used inside a function.
Create the message for the colons_check() function.
Get the $MISSING_ARG_NAMES, $MISSING_ARGS and $NEW of all_args_here()"><title>.pack_and_function_check — .pack_and_function_check • saferDev</title><!-- favicons --><link rel="icon" type="image/png" sizes="16x16" href="../favicon-16x16.png"><link rel="icon" type="image/png" sizes="32x32" href="../favicon-32x32.png"><link rel="apple-touch-icon" type="image/png" sizes="180x180" href="../apple-touch-icon.png"><link rel="apple-touch-icon" type="image/png" sizes="120x120" href="../apple-touch-icon-120x120.png"><link rel="apple-touch-icon" type="image/png" sizes="76x76" href="../apple-touch-icon-76x76.png"><link rel="apple-touch-icon" type="image/png" sizes="60x60" href="../apple-touch-icon-60x60.png"><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.11/clipboard.min.js" integrity="sha512-7O5pXpc0oCRrxk8RUfDYFgn0nO1t+jLuIOQdOMRp4APB7uZ4vSjspzp5y6YDtDs4VzUSTbWzBFZ/LKJhnyFOKw==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><link href="../extra.css" rel="stylesheet"><meta property="og:title" content=".pack_and_function_check — .pack_and_function_check"><meta property="og:description" content="Check if 1) required functions are present in required packages and 2) required packages are installed locally.
Simplified version of saferDev::is_function_here(), used as internal function for the other functions of the package.
Check if critical operators of R are not present in other packages or in the global env.
Others functions of the R scope can be overwritten because safer functions always use :: when using any function.
Determine if a string has a odd number of quotes.
Extract all function names.
Replace any pattern inside simple ou double quotes by another replacement pattern and get the position of replacements
Replace any pattern inside () by another replacement pattern
Indicate if function names are inside quotes or after $
Return the positions of 1st letter of the function name and opening and closing parenthesis, as well as positions of the internal parenthesis.
Detect all the functions names used inside a function.
Create the message for the colons_check() function.
Get the $MISSING_ARG_NAMES, $MISSING_ARGS and $NEW of all_args_here()"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light" data-bs-theme="light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">saferDev</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">1.0</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item">
  <a class="nav-link" href="../articles/saferDev.html">Get started</a>
</li>
<li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/all_args_here.html">all_args_here</a>
    <a class="dropdown-item" href="../articles/arg_check.html">arg_check</a>
    <a class="dropdown-item" href="../articles/arg_test.html">arg_test</a>
    <a class="dropdown-item" href="../articles/colons_check.html">colons_check</a>
    <a class="dropdown-item" href="../articles/env_check.html">env_check</a>
    <a class="dropdown-item" href="../articles/get_message.html">get_message</a>
    <a class="dropdown-item" href="../articles/is_function_here.html">is_function_here</a>
    <a class="dropdown-item" href="../articles/is_package_here.html">is_package_here</a>
    <a class="dropdown-item" href="../articles/is_python_package_here.html">is_python_package_here</a>
    <a class="dropdown-item" href="../articles/report.html">report</a>
  </div>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>.pack_and_function_check</h1>
      
      <div class="d-none name"><code>internal_function.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Check if 1) required functions are present in required packages and 2) required packages are installed locally.
Simplified version of saferDev::is_function_here(), used as internal function for the other functions of the package.</p>
<p>Check if critical operators of R are not present in other packages or in the global env.
Others functions of the R scope can be overwritten because safer functions always use :: when using any function.</p>
<p>Determine if a string has a odd number of quotes.</p>
<p>Extract all function names.</p>
<p>Replace any pattern inside simple ou double quotes by another replacement pattern and get the position of replacements</p>
<p>Replace any pattern inside () by another replacement pattern</p>
<p>Indicate if function names are inside quotes or after $</p>
<p>Return the positions of 1st letter of the function name and opening and closing parenthesis, as well as positions of the internal parenthesis.</p>
<p>Detect all the functions names used inside a function.</p>
<p>Create the message for the colons_check() function.</p>
<p>Get the $MISSING_ARG_NAMES, $MISSING_ARGS and $NEW of all_args_here()</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">.pack_and_function_check</span><span class="op">(</span></span>
<span>  <span class="va">fun</span>,</span>
<span>  <span class="va">lib_path</span>,</span>
<span>  <span class="va">external_function_name</span>,</span>
<span>  <span class="va">external_package_name</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.base_op_check</span><span class="op">(</span><span class="va">external_function_name</span>, <span class="va">external_package_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.has_odd_number_of_quotes</span><span class="op">(</span><span class="va">input_string</span>, pattern <span class="op">=</span> <span class="st">"\""</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.extract_all_fun_names</span><span class="op">(</span><span class="va">text</span>, <span class="va">pattern</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.in_quotes_replacement</span><span class="op">(</span></span>
<span>  <span class="va">string</span>,</span>
<span>  <span class="va">pattern</span>,</span>
<span>  <span class="va">no_regex_pattern</span>,</span>
<span>  <span class="va">replacement</span>,</span>
<span>  <span class="va">perl</span>,</span>
<span>  <span class="va">function_name</span>,</span>
<span>  <span class="va">package_name</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.in_parenthesis_replacement</span><span class="op">(</span></span>
<span>  <span class="va">string</span>,</span>
<span>  <span class="va">pattern</span>,</span>
<span>  <span class="va">no_regex_pattern</span>,</span>
<span>  <span class="va">replacement</span>,</span>
<span>  <span class="va">perl</span>,</span>
<span>  <span class="va">open_pos</span>,</span>
<span>  <span class="va">close_pos</span>,</span>
<span>  <span class="va">function_name</span>,</span>
<span>  <span class="va">package_name</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.noclean_functions</span><span class="op">(</span><span class="va">col1</span>, <span class="va">col2</span>, <span class="va">col3</span>, <span class="va">ini</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.fun_args_pos</span><span class="op">(</span><span class="va">text</span>, <span class="va">pattern</span>, <span class="va">function_name</span>, <span class="va">package_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.functions_detect</span><span class="op">(</span><span class="va">x</span>, <span class="va">arg_user_setting</span>, <span class="va">function_name</span>, <span class="va">package_name</span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.colons_check_message</span><span class="op">(</span></span>
<span>  <span class="va">list.fun</span>,</span>
<span>  <span class="va">fun.uni</span>,</span>
<span>  <span class="va">list.fun.pos</span>,</span>
<span>  <span class="va">line.nb</span>,</span>
<span>  <span class="va">ini</span>,</span>
<span>  <span class="va">arg_user_setting</span>,</span>
<span>  <span class="va">function_name</span>,</span>
<span>  <span class="va">package_name</span>,</span>
<span>  <span class="va">text</span>,</span>
<span>  <span class="va">internal_fun_names</span></span>
<span><span class="op">)</span></span>
<span></span>
<span><span class="fu">.all_args_here_fill</span><span class="op">(</span></span>
<span>  <span class="va">arg_full</span>,</span>
<span>  <span class="va">arg_full_names</span>,</span>
<span>  <span class="va">tempo_split</span>,</span>
<span>  <span class="va">three_dots_log</span>,</span>
<span>  <span class="va">i2</span>,</span>
<span>  <span class="va">col1_i2</span>,</span>
<span>  <span class="va">col2_i2</span>,</span>
<span>  <span class="va">arg_user_setting_x</span>,</span>
<span>  <span class="va">function_name</span>,</span>
<span>  <span class="va">package_name</span>,</span>
<span>  <span class="va">warn</span>,</span>
<span>  <span class="va">warn_count</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>fun</dt>
<dd><p>Character vector of the names of the required functions, preceded by the name of the package they belong to and a double or triple colon. Example: c("ggplot2::geom_point", "grid::gpar").</p></dd>


<dt>lib_path</dt>
<dd><p>Character vector specifying the absolute pathways of the directories containing the listed packages in the fun argument, if not in the default directories. If NULL, the function checks only in the base::.libPaths() default R library folders.</p></dd>


<dt>external_function_name</dt>
<dd><p>Name of the function using the .pack_and_function_check() function.</p></dd>


<dt>external_package_name</dt>
<dd><p>Name of the package of the function using the .pack_and_function_check() function.</p></dd>


<dt>input_string</dt>
<dd><p>Single string.</p></dd>


<dt>pattern</dt>
<dd><p>Single string indicating the pattern to detect. Warning : must be very simple pattern, like ",".</p></dd>


<dt>text</dt>
<dd><p>either "BASIC" or "OTHER".</p></dd>


<dt>string</dt>
<dd><p>Single string.</p></dd>


<dt>no_regex_pattern</dt>
<dd><p>Single string of the pattern to detect but without escape characters or list, etc.</p></dd>


<dt>replacement</dt>
<dd><p>Single string for pattern replacement. Is not regex.</p></dd>


<dt>perl</dt>
<dd><p>Single logical value. Use Perl regex in pattern ?</p></dd>


<dt>function_name</dt>
<dd><p>function name.</p></dd>


<dt>package_name</dt>
<dd><p>package name.</p></dd>


<dt>open_pos</dt>
<dd><p>single integer indicating the position of the opening parenthesis.</p></dd>


<dt>close_pos</dt>
<dd><p>single integer indicating the position of the closing parenthesis.</p></dd>


<dt>col1</dt>
<dd><p>vector of strings.</p></dd>


<dt>col2</dt>
<dd><p>vector of strings of the function names.</p></dd>


<dt>col3</dt>
<dd><p>vector of strings of the code before the function name.</p></dd>


<dt>ini</dt>
<dd><p>vector of string of the initial function code analyzed.</p></dd>


<dt>x</dt>
<dd><p>a function name, written without quotes and brackets.</p></dd>


<dt>arg_user_setting</dt>
<dd><p>list of arg user settings.</p></dd>


<dt>list.fun</dt>
<dd><p>list of names of all the functions.</p></dd>


<dt>fun.uni</dt>
<dd><p>vector of all the unique function names.</p></dd>


<dt>list.fun.pos</dt>
<dd><p>list of position of first character of names of all the functions in ini.</p></dd>


<dt>line.nb</dt>
<dd><p>vector of corresponding line number.</p></dd>


<dt>internal_fun_names</dt>
<dd><p>vector of string of names of internal functions in the function code analyzed.</p></dd>


<dt>arg_full</dt>
<dd><p>list of all arguments of the function with default value</p></dd>


<dt>arg_full_names</dt>
<dd><p>vector of strings of the names of the arguments of the function</p></dd>


<dt>tempo_split</dt>
<dd><p>vector of strings of the observed argument writting of the function.</p></dd>


<dt>three_dots_log</dt>
<dd><p>vector of logical. Is ... present among arg_full_names</p></dd>


<dt>i2</dt>
<dd><p>loop number</p></dd>


<dt>col1_i2</dt>
<dd><p>code line number of the checked function</p></dd>


<dt>col2_i2</dt>
<dd><p>name of the checked sub function</p></dd>


<dt>arg_user_setting_x</dt>
<dd><p>name of the checked function</p></dd>


<dt>warn</dt>
<dd><p>warning string.</p></dd>


<dt>warn_count</dt>
<dd><p>warning count.</p></dd>


<dt>pattern:</dt>
<dd><p>A perl regex to extract function name and (), using generally paste0(&lt;FUNCTION_NAME&gt;, "[\s\r\n]*\(").</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>An error message if at least one of the checked packages is missing in lib_path, or if at least one of the checked functions is missing in the required package, nothing otherwise.</p>


<p>An error message if at least one of the checked operator is present in the R scope, nothing otherwise.</p>


<p>TRUE or FALSE.</p>


<p>A list containing:
$string: the function names without parenthesis.
$pos: position of the first character of the function names in the input string</p>


<p>A list containing:
$string: The input string with all pattern replaced by the replacement pattern.
$pos: vector of the positions of the 1rst character of the replaced pattern. NULL if no replaced pattern. In that case, $string is identical to the input string.</p>


<p>A list containing:
$string: The input string with all pattern replaced by the replacement pattern.
$pos: the positions of the 1rst character of the replaced pattern. NULL if no replaced pattern. In that case, $string is identical to the input string</p>


<p>A logical vector indicating if function names of col2 are inside quotes or after $ (TRUE) in ini or not (FALSE). Can be length 0</p>


<p>A list containing two positions:
$begin_fun: position of 1st letter of the function name.
$begin: position of the "(" of the function.
$end: position of the closing ")" of the function.
$middle_bracket_pos: list of positions of the couple of brackets in the middle of the begin and end positions. In each compartment, the first number is the position of ( and the second the position of ). NULL if no inside brackets.</p>


<p>A list:
$code: vector of strings of the code of the tested function.
$all_basic_funs: vector or strings of names of all the basic R functions.
$fun_names: list of names of all the functions, not considering base::c("function", "if", "for", "while", "repeat"). Compartment names indicate the code line number of the functions in $code.
$fun_names_pos: list of position of the first character of each $fun_names. Compartment names indicate the code line number of the functions in $code.
$code_line_nb: vector of integers of the code line numbers of code for each non empty compartment of $fun_names and $fun_names_pos.
$internal_fun_names: vector of string of names of internal functions in the code of the tested function.
$arg_user_setting: list of arg user settings of the tested function.</p>


<p>A list:
 $output.cat: the message (string).
 $colon_not_here: logical vector. Does list.fun contain function names without :: or ::: ?</p>


<p>A list:
   $col6: the $MISSING_ARG_NAMES.
   $col7: the $MISSING_ARGS.
   $col8: the $STATUS.</p>
    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>Warning : must be very simple pattern, like "\(".</p>
<p>Warning : must be very simple pattern, like "\(".</p>
<p>Warning: the string must be cleaned form brackets between quotes. Use .in_quotes_replacement() for that.
Warning: quotes in strings are escaped, so that position of ( in \"a( is 3, not 4.</p>
<p>- Does not check if the functions inside the code exist.
- Use the regex pattern "([a-zA-Z]|\.[a-zA-Z._])[a-zA-Z0-9._]*\s*\(" to detect a function in the code.
- $all_basic_funs are all the functions in base::c("package:stats", "package:graphics",  "package:grDevices", "package:utils", "package:datasets", "package:methods", "Autoloads", "package:base")</p>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Gael Millot &lt;gael.millot@pasteur.fr&gt;</p>
<p>Yushi Han &lt;yushi.han2000@gmail.com&gt;</p>
<p>Haiding Wang &lt;wanghaiding442@gmail.com&gt;</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="fu">.pack_and_function_check</span><span class="op">(</span>fun <span class="op">=</span> <span class="st">"ggplot2::notgood"</span>, lib_path <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span>, external_function_name <span class="op">=</span> <span class="st">"F1"</span>, external_package_name <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span> <span class="co"># this example returns an error</span></span></span>
<span class="r-in"><span><span class="fu">.pack_and_function_check</span><span class="op">(</span>fun <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"ggplot2::geom_point"</span>, <span class="st">"grid::gpar"</span><span class="op">)</span>, lib_path <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/libPaths.html" class="external-link">.libPaths</a></span><span class="op">(</span><span class="op">)</span>, external_function_name <span class="op">=</span> <span class="st">"F1"</span>, external_package_name <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in .pack_and_function_check(fun = c("ggplot2::geom_point", "grid::gpar"),     lib_path = base::.libPaths(), external_function_name = "F1",     external_package_name = "P1"):</span> could not find function ".pack_and_function_check"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="fu"><a href="https://rdrr.io/r/base/assign.html" class="external-link">assign</a></span><span class="op">(</span><span class="st">"!"</span>, <span class="fl">1</span><span class="op">)</span> ; <span class="fu">.base_op_check</span><span class="op">(</span>external_function_name <span class="op">=</span> <span class="st">"fun1"</span><span class="op">)</span> <span class="co"># commented because this example returns an error</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="fu">.has_odd_number_of_quotes</span><span class="op">(</span>input_string <span class="op">=</span> <span class="st">'This is a "test" string with "even" quotes'</span>, pattern <span class="op">=</span> <span class="st">'"'</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="fu">.extract_all_fun_names</span><span class="op">(</span>text <span class="op">=</span> <span class="st">'This is a test string with sum()'</span>, pattern <span class="op">=</span> <span class="st">"[a-zA-Z.][a-zA-Z0-9._]*\\s*\\("</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/safer-r/saferDev/main/dev/other/test.R"</span><span class="op">)</span> ; <span class="fu">.in_quotes_replacement</span><span class="op">(</span>string <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/deparse.html" class="external-link">deparse</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span>, collapse <span class="op">=</span> <span class="st">""</span><span class="op">)</span>, pattern <span class="op">=</span> <span class="st">"\\)"</span>, no_regex_pattern <span class="op">=</span> <span class="st">")"</span>, replacement <span class="op">=</span> <span class="st">" "</span>, perl <span class="op">=</span> <span class="cn">TRUE</span>, function_name <span class="op">=</span> <span class="st">"F1"</span>, package_name <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in .in_quotes_replacement(string = paste(deparse(test), collapse = ""),     pattern = "\\)", no_regex_pattern = ")", replacement = " ",     perl = TRUE, function_name = "F1", package_name = "P1"):</span> could not find function ".in_quotes_replacement"</span>
<span class="r-in"><span><span class="fu">.in_quotes_replacement</span><span class="op">(</span>string <span class="op">=</span> <span class="st">'paste0("IAGE((", paste0(1:3, collapse = " "), "A)B()")'</span>, pattern <span class="op">=</span> <span class="st">"\\)"</span>, no_regex_pattern <span class="op">=</span> <span class="st">")"</span>, replacement <span class="op">=</span> <span class="st">" "</span>, perl <span class="op">=</span> <span class="cn">TRUE</span>, function_name <span class="op">=</span> <span class="st">"F1"</span>, package_name <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in .in_quotes_replacement(string = "paste0(\"IAGE((\", paste0(1:3, collapse = \" \"), \"A)B()\")",     pattern = "\\)", no_regex_pattern = ")", replacement = " ",     perl = TRUE, function_name = "F1", package_name = "P1"):</span> could not find function ".in_quotes_replacement"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="fu">.in_parenthesis_replacement</span><span class="op">(</span>string <span class="op">=</span> <span class="st">"pattern = base::paste0(pattern, \"\\\\(#\"), text = text"</span>, pattern <span class="op">=</span> <span class="st">","</span>, no_regex_pattern <span class="op">=</span> <span class="st">","</span>, replacement <span class="op">=</span> <span class="st">" "</span>, perl <span class="op">=</span> <span class="cn">TRUE</span>, open_pos <span class="op">=</span> <span class="fl">23</span>, close_pos <span class="op">=</span> <span class="fl">39</span>, function_name <span class="op">=</span> <span class="st">"F1"</span>, package_name <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"https://raw.githubusercontent.com/safer-r/saferDev/main/dev/other/test.R"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">.noclean_functions</span><span class="op">(</span>col1 <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">15</span>, <span class="fl">17</span><span class="op">)</span>, col2 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"gregexpr"</span>, <span class="st">"regmatches"</span><span class="op">)</span>, col3 <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"matches &lt;- "</span>,  <span class="st">"matched_strings &lt;- "</span> <span class="op">)</span>, ini <span class="op">=</span> <span class="fu">utils</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/utils/capture.output.html" class="external-link">capture.output</a></span><span class="op">(</span><span class="va">test</span><span class="op">)</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in .noclean_functions(col1 = c(15, 17), col2 = c("gregexpr", "regmatches"),     col3 = c("matches &lt;- ", "matched_strings &lt;- "), ini = utils::capture.output(test)):</span> could not find function ".noclean_functions"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="co"># Warning : examples only with strings that must be cleaned form brackets between quotes</span></span></span>
<span class="r-in"><span><span class="fu">.fun_args_pos</span><span class="op">(</span>text <span class="op">=</span> <span class="st">"a$regmatches(x = text, m = matches)[[1]]"</span>, pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"regmatches"</span>, <span class="st">"[\\s\\r\\n]*\\("</span><span class="op">)</span>, function_name <span class="op">=</span> <span class="st">"F1"</span>, package_name <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="fu">.fun_args_pos</span><span class="op">(</span>text <span class="op">=</span> <span class="st">' "a" ; paste0("I", paste0(sum(1:3), collapse = " "), min(1) ) ; range(2)'</span>, pattern <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/paste.html" class="external-link">paste0</a></span><span class="op">(</span><span class="st">"paste0"</span>, <span class="st">"[\\s\\r\\n]*\\("</span><span class="op">)</span>, function_name <span class="op">=</span> <span class="st">"F1"</span>, package_name <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in .fun_args_pos(text = " \"a\" ; paste0(\"I\", paste0(sum(1:3), collapse = \" \"), min(1) ) ; range(2)",     pattern = paste0("paste0", "[\\s\\r\\n]*\\("), function_name = "F1",     package_name = "P1"):</span> could not find function ".fun_args_pos"</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span>  <span class="co"># Example that shouldn't be run because this is an internal function</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/source.html" class="external-link">source</a></span><span class="op">(</span><span class="st">"C:\\Users\\gmillot\\Documents\\Git_projects\\safer-r\\saferDev\\dev\\other\\test.R"</span><span class="op">)</span> ; <span class="fu">.functions_detect</span><span class="op">(</span>x <span class="op">=</span> <span class="va">test</span>, arg_user_setting <span class="op">=</span> <span class="fu">base</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/r/base/list.html" class="external-link">list</a></span><span class="op">(</span>x <span class="op">=</span>  <span class="fu"><a href="https://rdrr.io/r/base/name.html" class="external-link">as.name</a></span><span class="op">(</span>x <span class="op">=</span> <span class="st">"test"</span><span class="op">)</span><span class="op">)</span>, function_name <span class="op">=</span> <span class="st">"F1"</span>, package_name <span class="op">=</span> <span class="st">"P1"</span><span class="op">)</span></span></span>
<span class="r-err co"><span class="r-pr">#&gt;</span> <span class="error">Error in .functions_detect(x = test, arg_user_setting = base::list(x = as.name(x = "test")),     function_name = "F1", package_name = "P1"):</span> could not find function ".functions_detect"</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by <a href="https://github.com/Tintin2710" class="external-link">Haiding Wang</a>, Gael Millot.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.9.</p>
</div>

    </footer></div>

  

  

  </body></html>

